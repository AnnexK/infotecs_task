# Сторонние зависимости

Список модулей, не включённых в стороннюю библиотеку и используемых в решении, представлен в файле `requirements.txt`. Установить зависимости можно следующим образом:
`pip install -r requirements.txt`

# Схемы данных

Все методы возвращают ответы в формате JSON. Далее приводится описание схем данных, используемых для формирования ответов.

## `GeonameEntry`

Эта схема представляет информацию о географическом объекте.

Поля:
- `geonameid`: `number` -- Идентификатор географического объекта
- `name`: `string` -- Название географического объекта
- `alternatenames`: `[string]` -- Альтернативные названия объекта
- `asciiname`: `string` -- Название, записанное символами ASCII
- `latitude`: `number` -- Широта географического объекта
- `longitude`: `number` -- Долгота географического объекта
- `feature_class`: `string` -- Класс географического объекта
- `feature_code`: `string` -- Код подкласса географического объекта
- `country_code`: `string` -- Код страны географического объекта
- `cc2`: `[string]` -- Альтернативные коды страны географического объекта
- `admincode1`: `string` -- FIPS-код географического объекта
- `admincode2`: `string` -- Код второго уровня административно-территориального деления географического объекта
- `admincode3`: `string` -- Код третьего уровня административно-территориального деления географического объекта
- `admincode4`: `string` -- Код четвертого уровня административно-территориального деления географического объекта
- `population`: `number` -- Население географического объекта
- `elevation`: `number` или `null` -- Уровень возвышения географического объекта
- `dem`: `number` -- Средний уровень возвышения географического объекта
- `timezone`: `string` -- Название часового пояса географического объекта
- `modification_date`: `string` -- Дата последней модификации записи (в базе GeoNames) географического объекта

## `GeonameEntryDiff`

Эта схема представляет информацию, возвращаемую методом №3: информацию о географических объектах, о том, какой из них севернее и о часовых зонах объектов.

Поля:
- `name1`: `GeonameEntry` -- Географический объект, соответствующий первому названию
- `name2`: `GeonameEntry` -- Географический объект, соответствующий первому названию
- `more_north_id`: `number` -- Идентификатор объекта, находящегося севернее
- `same_timezone`: `bool` -- Находятся ли объекты в одной часовой зоне
- `timezone_diff`: `number` -- Разница часовых зон объектов в часах

## `HTTPError`

Эта схема представляет информацию о причине ошибки HTTP.

Поля:
- `detail`: `string` -- Детальная информация об ошибке

## `HTTPValidationError`

Эта схема является встроенной в FastAPI и представляет информацию об ошибках валидации в результате выполнения запроса.

Поля:
- `detail`: `[Detail]` -- Блоки информации о каждой ошибке валидации

### `Detail`

Эта схема представляет информацию об одной ошибке валидации.

Поля:
- `loc`: `[string]` -- Расположение ошибки
- `msg`: `string` -- Сообщение об ошибке
- `type`: `string` -- Тип ошибки

# Описание методов

## 1. Получить информацию о городе по идентификатору

**Метод**: GET

**URL**: `/cities/{geonameid}`

**Параметры пути**:
- `geonameid` -- идентификатор города, положительное целое число

**Параметры запроса**: отсутствуют

**Тело запроса**: отсутствует

**Ответы**:
- Город с идентификатором `geonameid` найден:
  - **Код ответа**: 200
  - **Схема данных**: `GeonameEntry`
- Город с идентификатором `geonameid` не найден:
  - **Код ответа**: 404
  - **Схема данных**: `HTTPError`
- Параметр `geonameid` не является положительным целым числом:
  - **Код ответа**: 422
  - **Схема данных**: `HTTPValidationError`

## 2. Получить информацию о заданном количестве городов на странице

**Метод**: GET

**URL**: `/cities/`

**Параметры пути**: отсутствуют

**Параметры запроса**: 
- `page` -- номер страницы, положительное целое число
- `entries_per_page` -- количество записей на страницу, положительное целое число

**Тело запроса**: отсутствует

**Ответы**:
- Сформирована страница с номером `page` и количеством записей на страницу `entries_per_page`:
  - **Код ответа**: 200
  - **Схема данных**: `[GeonameEntry]`
- Параметр `page` не является положительным целым числом:
  - **Код ответа**: 422
  - **Схема данных**: `HTTPValidationError`
- Параметр `entries_per_page` не является положительным целым числом:
  - **Код ответа**: 422
  - **Схема данных**: `HTTPValidationError`
- Один (или более) из параметров не указан
  - **Код ответа**: 422
  - **Схема данных**: `HTTPValidationError`

**Дополнительно**:
- Если количества записей недостаточно для формирования ответа, то количество записей в ответе может быть меньше, чем `entries_per_page`, в том числе нулевым.

## 3. Получить информацию о двух городах по их имени, а также информацию о том, какой из городов находится севернее, одинаковая ли у них часовая зона, и разницу часовых зон в часах

**Метод**: GET

**URL**: `/diff/`

**Параметры пути**: отсутствуют

**Параметры запроса**: 
- `name1` -- название первого города
- `name2` -- название второго города

**Тело запроса**: отсутствует

**Ответы**:
- Города с именем `name1` и `name2` найдены:
  - **Код ответа**: 200
  - **Схема данных**: `GeonameEntryDiff`
- Город с именем `name1` не найден:
  - **Код ответа**: 404
  - **Схема данных**: `HTTPError`
- Город с именем `name2` не найден:
  - **Код ответа**: 404
  - **Схема данных**: `HTTPError`
- Хотя бы один из параметров не указан:
  - **Код ответа**: 404
  - **Схема данных**: `HTTPValidationError`

**Дополнительно**:
- Названия `name1`, `name2` кириллические.
- Поиск соответствий проводится по альтернативным именам (без транслитерации) и по основному имени (с транслитерацией методом BGN/PCGN).